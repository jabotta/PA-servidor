<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ImagenComponent.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;ProgramacionApp&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">Vista</a> &gt; <span class="el_source">ImagenComponent.java</span></div><h1>ImagenComponent.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Vista;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.Objects;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JDialog;
import javax.swing.JFileChooser;
import javax.swing.JLabel;
import javax.swing.JPanel;
import static javax.swing.WindowConstants.DISPOSE_ON_CLOSE;
import javax.swing.event.EventListenerList;
import javax.swing.filechooser.FileNameExtensionFilter;

/**
 *
 * @author rodro
 */
public class ImagenComponent extends JPanel {

    private final JLabel nombre;
    private final JButton editBtn;
    private final JButton deleteBtn;
    private File f;
    private boolean isDeleted;
    private final JButton viewBtn;

<span class="nc" id="L37">    public ImagenComponent(File f) {</span>

<span class="nc" id="L39">        this.f = f;</span>
<span class="nc" id="L40">        this.setSize(400, 100);</span>
<span class="nc" id="L41">        nombre = new JLabel(f.getName());</span>
<span class="nc" id="L42">        viewBtn = new JButton(&quot;ver&quot;);</span>
<span class="nc" id="L43">        editBtn = new JButton(&quot;editar&quot;);</span>
<span class="nc" id="L44">        deleteBtn = new JButton(&quot;Borrar&quot;);</span>
<span class="nc" id="L45">        nombre.setVerticalAlignment(0);</span>
<span class="nc" id="L46">        nombre.setBounds(10, 0, 100, 30);</span>
<span class="nc" id="L47">        editBtn.setBounds(90, 10, 80, 20);</span>
<span class="nc" id="L48">        deleteBtn.setBounds(180, 10, 80, 20);</span>
<span class="nc" id="L49">        this.add(nombre);</span>
<span class="nc" id="L50">        this.add(viewBtn);</span>
<span class="nc" id="L51">        this.add(editBtn);</span>
<span class="nc" id="L52">        this.add(deleteBtn);</span>
<span class="nc" id="L53">        repaint();</span>

<span class="nc" id="L55">        editBtn.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L59">                editarImagen(e);</span>
<span class="nc" id="L60">            }</span>
        });
<span class="nc" id="L62">        deleteBtn.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L66">                delete(e);</span>
<span class="nc" id="L67">            }</span>

        });
<span class="nc" id="L70">        viewBtn.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L74">                ver(e);</span>
<span class="nc" id="L75">            }</span>

        });

<span class="nc" id="L79">    }</span>

    private void ver(ActionEvent e) {
<span class="nc" id="L82">        JDialog dialog = new JDialog();</span>
<span class="nc" id="L83">        dialog.setTitle(&quot;Visor Imagenes&quot;+f.getName());</span>

<span class="nc" id="L85">        ImagePanel p = new ImagePanel(f.getAbsolutePath());</span>
<span class="nc" id="L86">        p.setSize(400, 400);</span>
<span class="nc" id="L87">         dialog.getContentPane().setSize(400, 400);</span>
<span class="nc" id="L88">        dialog.getContentPane().add(p, BorderLayout.CENTER); </span>
<span class="nc" id="L89">        dialog.setDefaultCloseOperation(DISPOSE_ON_CLOSE);</span>
<span class="nc" id="L90">        dialog.setSize(new Dimension(400, 400));</span>
<span class="nc" id="L91">        dialog.setLocationRelativeTo(getParent().getParent().getParent());</span>
<span class="nc" id="L92">        dialog.setModal(true);</span>
<span class="nc" id="L93">        dialog.setVisible(true);</span>
        
<span class="nc" id="L95">        dialog.setSize(new Dimension(500, 500));</span>
<span class="nc" id="L96">    }</span>

    @Override
    public int hashCode() {
<span class="nc" id="L100">        int hash = 7;</span>
<span class="nc" id="L101">        hash = 31 * hash + Objects.hashCode(this.nombre);</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">        hash = 31 * hash + (this.isDeleted ? 1 : 0);</span>
<span class="nc" id="L103">        return hash;</span>
    }

    @Override
    public boolean equals(Object obj) {
<span class="nc bnc" id="L108" title="All 2 branches missed.">        if (obj == null) {</span>
<span class="nc" id="L109">            return false;</span>
        }
<span class="nc bnc" id="L111" title="All 2 branches missed.">        if (getClass() != obj.getClass()) {</span>
<span class="nc" id="L112">            return false;</span>
        }
<span class="nc" id="L114">        final ImagenComponent other = (ImagenComponent) obj;</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">        if (!Objects.equals(this.nombre, other.nombre)) {</span>
<span class="nc" id="L116">            return false;</span>
        }
<span class="nc bnc" id="L118" title="All 2 branches missed.">        if (this.isDeleted != other.isDeleted) {</span>
<span class="nc" id="L119">            return false;</span>
        }
<span class="nc" id="L121">        return true;</span>
    }

    private void delete(ActionEvent e) {

<span class="nc" id="L126">        this.setVisible(false);</span>
<span class="nc" id="L127">        this.isDeleted = true;</span>
<span class="nc" id="L128">        this.disableEvents(WIDTH);</span>
<span class="nc" id="L129">        fireNotifyEvent(new NotifyEvent(this));</span>
<span class="nc" id="L130">    }</span>

    private void editarImagen(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_agregarImgBtnActionPerformed

<span class="nc" id="L134">        JFileChooser chooser = new JFileChooser();</span>
<span class="nc" id="L135">        FileNameExtensionFilter filter = new FileNameExtensionFilter(&quot;Imagenes&quot;, &quot;jpg&quot;, &quot;gif&quot;, &quot;png&quot;);</span>
<span class="nc" id="L136">        chooser.setFileFilter(filter);</span>
<span class="nc" id="L137">        chooser.setDialogTitle(&quot;Eliga una imagen para su producto&quot;);</span>
<span class="nc" id="L138">        int returnVal = chooser.showOpenDialog(this.getParent());</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (returnVal == JFileChooser.APPROVE_OPTION) {</span>
<span class="nc" id="L140">            cambiarArchivo(chooser.getSelectedFile());</span>

        }

<span class="nc" id="L144">    }</span>

    private void cambiarArchivo(File selectedFile) {

<span class="nc" id="L148">        this.f = selectedFile;</span>
<span class="nc" id="L149">        this.nombre.setText(f.getName());</span>
<span class="nc" id="L150">        repaint();</span>

<span class="nc" id="L152">    }</span>

    public boolean isDeleted() {
<span class="nc" id="L155">        return isDeleted;</span>
    }
<span class="nc" id="L157">    protected EventListenerList listenerList = new EventListenerList();</span>

    public void addNotifyEventListener(NotifyEventListener listener) {
<span class="nc" id="L160">        listenerList.add(NotifyEventListener.class, listener);</span>
<span class="nc" id="L161">    }</span>

    public void removeNotifyEventLListener(NotifyEventListener listener) {
<span class="nc" id="L164">        listenerList.remove(NotifyEventListener.class, listener);</span>
<span class="nc" id="L165">    }</span>

    void fireNotifyEvent(NotifyEvent evt) {
<span class="nc" id="L168">        Object[] listeners = listenerList.getListenerList();</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">        for (int i = 0; i &lt; listeners.length; i = i + 2) {</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">            if (listeners[i] == NotifyEventListener.class) {</span>
<span class="nc" id="L171">                ((NotifyEventListener) listeners[i + 1]).notifyEvent(evt);</span>
            }
        }
<span class="nc" id="L174">    }</span>

    public String getPath() {
<span class="nc" id="L177">        return f.getAbsolutePath();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>