<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>VerInfoProductos.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;ProgramacionApp&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">Vista</a> &gt; <span class="el_source">VerInfoProductos.java</span></div><h1>VerInfoProductos.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Vista;

import Controlador.Clases.Fabrica;
import Controlador.Clases.IControladorProductos;
import static Controlador.Clases.Main.idUsuariosControlador;
import Controlador.Clases.Utils;
import Controlador.DataTypes.DataEspecificacionProducto;
import Controlador.DataTypes.DataProveedor;
import static Vista.VentanaPrincipal.controlarProducto;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.time.Instant;
import java.util.Date;
import java.util.Vector;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SpringLayout;
import static javax.swing.WindowConstants.DISPOSE_ON_CLOSE;
import javax.swing.table.TableModel;

/**
 *
 * @author rodro
 */
public class VerInfoProductos extends JInternalFrame {

    private String nroRef;
    private JDialog dialog;
    private final ElegirCategoriaComponente treePane;
    private final JPanel InfoPanel;
    private final JPanel offsetleft;
    private final IControladorProductos controlarProducto;

    private int index;
    private final JPanel listaProductosPanel;
    private Formulario form; 
    private JButton saveButton;
    private JButton cancelarButton;
    private JPanel buttonContainer;

    /**
     * Creates new form VerInfoProductos
     */
<span class="nc" id="L59">    public VerInfoProductos(IControladorProductos controlarProducto) {</span>

<span class="nc" id="L61">        this.controlarProducto = controlarProducto;</span>
    

<span class="nc" id="L64">        setBounds(50, 50, 800, 500);</span>
<span class="nc" id="L65">        setVisible(true);</span>
<span class="nc" id="L66">        setLayout(new SpringLayout());</span>

<span class="nc" id="L68">        JButton elegirCategoria = new JButton(&quot;Elegir Categorias&quot;);</span>
<span class="nc" id="L69">        elegirCategoria.setSize(100, 40);</span>
<span class="nc" id="L70">        elegirCategoria.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L74">                openDialog();</span>
<span class="nc" id="L75">            }</span>
        });
<span class="nc" id="L77">        treePane = new ElegirCategoriaComponente(controlarProducto, true);</span>
<span class="nc" id="L78">        listaProductosPanel = new JPanel();</span>
<span class="nc" id="L79">        listaProductosPanel.setLayout(new GridLayout(1, 0));</span>

<span class="nc" id="L81">        offsetleft = new JPanel();</span>
<span class="nc" id="L82">        offsetleft.setLayout(new BorderLayout());</span>
<span class="nc" id="L83">        offsetleft.setSize(400, 500);</span>
<span class="nc" id="L84">        offsetleft.setVisible(true);</span>
<span class="nc" id="L85">        offsetleft.setLocation(0, 10);</span>
<span class="nc" id="L86">        offsetleft.add(elegirCategoria, BorderLayout.NORTH);</span>
<span class="nc" id="L87">        offsetleft.add(listaProductosPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L88">        buttonContainer = new JPanel(new FlowLayout());</span>
<span class="nc" id="L89">        buttonContainer.setSize(400, 500);</span>
<span class="nc" id="L90">        buttonContainer.setVisible(true);</span>
 
<span class="nc" id="L92">        cancelarButton = new JButton(&quot;Cancelar&quot;);</span>
<span class="nc" id="L93">        cancelarButton.setSize(100, 40);</span>
<span class="nc" id="L94">        cancelarButton.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L98">                cancel();</span>
<span class="nc" id="L99">            }</span>
        });
<span class="nc" id="L101">        buttonContainer.add(cancelarButton);</span>
<span class="nc" id="L102">        offsetleft.add(buttonContainer, BorderLayout.SOUTH);</span>
<span class="nc" id="L103">        InfoPanel = new JPanel();</span>
<span class="nc" id="L104">        InfoPanel.setSize(400, 500);</span>
<span class="nc" id="L105">        InfoPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L106">        add(offsetleft);</span>
<span class="nc" id="L107">        add(InfoPanel);</span>

<span class="nc" id="L109">        SpringUtilities.makeGrid(this.getContentPane(), 1, 2, 0, 0, 6, 6);</span>

<span class="nc" id="L111">    }</span>

    private void cancel() {
<span class="nc" id="L114">        dispose();</span>
<span class="nc" id="L115">    }</span>

    private void listarProductos() {
<span class="nc" id="L118">        listaProductosPanel.removeAll();</span>
<span class="nc" id="L119">        listaProductosPanel.revalidate();</span>
<span class="nc" id="L120">        listaProductosPanel.repaint();</span>

<span class="nc bnc" id="L122" title="All 2 branches missed.">        if (!treePane.getSelectedCategories().isEmpty()) {</span>
<span class="nc" id="L123">            String catName = treePane.getSelectedCategories().iterator().next();</span>
<span class="nc" id="L124">            controlarProducto.elegirCategoria(catName);</span>
        }
<span class="nc" id="L126">        Object[][] rowData = new Object[controlarProducto.listarProductosCategoria().size()][2];</span>
<span class="nc" id="L127">        index = 0;</span>

<span class="nc" id="L129">        controlarProducto.listarProductosCategoria().forEach((c) -&gt; {</span>
            Object[] obj = {c.getNroReferencia(), c.getNombre()};

            rowData[index] = obj;
            index++;
        });
<span class="nc" id="L135">        String[] columnNames = {&quot;NroRef&quot;, &quot;Nombre&quot;};</span>

<span class="nc" id="L137">        JTable listaProductos = new JTable(rowData, columnNames);</span>
<span class="nc" id="L138">        listaProductos.setPreferredScrollableViewportSize(new Dimension(500, 100));</span>
<span class="nc" id="L139">        listaProductos.setFillsViewportHeight(true);</span>

<span class="nc" id="L141">        listaProductos.addMouseListener(new MouseAdapter() {</span>
            @Override
            public void mouseClicked(MouseEvent e) {
<span class="nc" id="L144">                printDataProducto(listaProductos);</span>
<span class="nc" id="L145">            }</span>
        });

<span class="nc" id="L148">        JScrollPane scrollPane = new JScrollPane(listaProductos);</span>
<span class="nc" id="L149">        listaProductosPanel.add(scrollPane);</span>
<span class="nc" id="L150">        listaProductosPanel.revalidate();</span>
<span class="nc" id="L151">        listaProductosPanel.repaint();</span>
<span class="nc" id="L152">        revalidate();</span>
<span class="nc" id="L153">        repaint();</span>
<span class="nc" id="L154">    }</span>

    private void printDataProducto(JTable listaProductos) {
<span class="nc" id="L157">        TableModel model = listaProductos.getModel();</span>
<span class="nc" id="L158">        int row = listaProductos.getSelectedRow();</span>
<span class="nc" id="L159">        String nroRef = (String) model.getValueAt(row, 0);</span>
<span class="nc" id="L160">        DataEspecificacionProducto dataProducto = controlarProducto.mostrarDatosProducto(nroRef);</span>
<span class="nc" id="L161">        form = new Formulario(false);</span>
<span class="nc" id="L162">        form.addField(&quot;Nombre&quot;, &quot;text&quot;, null, dataProducto.getNombre());</span>
<span class="nc" id="L163">        form.addField(&quot;NroRef&quot;, &quot;text&quot;, null, dataProducto.getNroReferencia());</span>
<span class="nc" id="L164">        form.addField(&quot;Descripcion&quot;, &quot;text&quot;, null, dataProducto.getDescripcion());</span>
<span class="nc" id="L165">        form.addField(&quot;Especificaciones&quot;, &quot;text&quot;, null, dataProducto.getEspecificacion().values().toString());</span>

<span class="nc" id="L167">        form.addField(&quot;Categorias&quot;, &quot;text&quot;, null, dataProducto.getCategorias().toString());</span>
<span class="nc" id="L168">        form.addField(&quot;Proveedor&quot;, &quot;text&quot;, null, dataProducto.getProveedor().toString());</span>
<span class="nc" id="L169">        form.addField(&quot;Imagenes&quot;, &quot;text&quot;, null, dataProducto.getImagenes().toString());</span>

<span class="nc" id="L171">        InfoPanel.add(form, BorderLayout.CENTER);</span>
<span class="nc" id="L172">        InfoPanel.revalidate();</span>
<span class="nc" id="L173">        InfoPanel.repaint();  </span>

<span class="nc" id="L175">    }</span>

    private void openDialog() {
<span class="nc" id="L178">        dialog = new JDialog();</span>
<span class="nc" id="L179">        dialog.setTitle(&quot;Elegir Categoria&quot;);</span>

<span class="nc" id="L181">        JButton aceptarButton = new JButton(&quot;Listo!!&quot;);</span>
<span class="nc" id="L182">        aceptarButton.setSize(80, 30);</span>
<span class="nc" id="L183">        aceptarButton.addActionListener(new ActionListener() {</span>

            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L187">                dialog.dispose();</span>
<span class="nc" id="L188">                listarProductos();</span>
<span class="nc" id="L189">            }</span>
        });
<span class="nc" id="L191">        dialog.getContentPane().setSize(400, 400);</span>
<span class="nc" id="L192">        dialog.getContentPane().add(treePane, BorderLayout.CENTER);</span>
<span class="nc" id="L193">        dialog.getContentPane().add(aceptarButton, BorderLayout.SOUTH);</span>
<span class="nc" id="L194">        dialog.setDefaultCloseOperation(DISPOSE_ON_CLOSE);</span>
<span class="nc" id="L195">        dialog.setSize(new Dimension(400, 400));</span>
<span class="nc" id="L196">        dialog.setLocationRelativeTo(this);</span>
<span class="nc" id="L197">        dialog.setModal(true);</span>
<span class="nc" id="L198">        dialog.setVisible(true);</span>

<span class="nc" id="L200">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>